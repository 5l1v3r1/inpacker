<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Inpacker</title>

    <!-- Bootstrap v4-alpha -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
          integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
            integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
            integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
            integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
            crossorigin="anonymous"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/css/general.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/settings.view.css">

    <link rel="icon" href="/favicon.ico">

    <!-- Angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script>

    <!-- scripts -->
    <script src="/app.js"></script>

</head>
<body ng-app="inpacker" ng-controller="AppController as ac" ng-cloak>

<!-- Header -->
<div class="header">
    <div class="container">
        <div class="col-md-8 offset-md-2 header-contents">
            <h4 class="col-md-8 offset-md-2 inpacker-header-title">
                <a href="/" ng-click="ac.showSearch()">
                    Inpacker
                </a>
            </h4>
        </div>
    </div>
</div>

<div class="container">

    <div class="col-md-8 offset-md-2 content-holder">

        <h1 class="logo">
            <i ng-class="ac.mainIconClass" aria-hidden="true"></i>
        </h1>

        <div ng-if="ac.view === 'search'" ng-controller="SearchController as sc">
            <form ng-submit="sc.search()">
                <div class="input-group col-md-10 offset-md-1">
                    <button class="input-group-addon search-button" type="button" id="basic-addon2"
                            ng-click="sc.search()">
                        <i class="fa fa-search" aria-hidden="true" title="Search {{sc.searchInput}}"
                           ng-show="!sc.searching"></i>
                        <i class="fa fa-spinner fa-spin fa-fw"
                           ng-show="sc.searching"></i>
                    </button>
                    <input class="col-md-11" type="text" placeholder="Search Instagram User"
                           aria-describedby="basic-addon2"
                           maxlength="30" ng-model="sc.searchInput" autofocus ng-disabled="sc.searching">
                </div>
                <div class="col-md-8 offset-md-2 alert alert-danger user-not-found-alert" role="alert"
                     ng-show="sc.showNotFound()">
                    <strong>User not found!</strong> {{sc.userNotFoundMessage}}
                    <span style="float: right;" ng-click="sc.closeUserNotFoundMessage()">
                <i class="fa fa-close" aria-hidden="true" title="Close"></i>
            </span>
                </div>
            </form>
        </div>

        <div ng-if="ac.view === 'info'" ng-controller="InfoController as ic">
            <div class="user-info-contents">
                <img class="col-md-4 img-circle" ng-src="{{ic.user.profilePic}}">
                <div class="col-md-7 user-info-holder">
                    <h3 class="private-user-text" ng-show="ic.user.isPrivate">
                        This user is private
                    </h3>
                    <h1>
                        <a href="{{ic.user.instagramPageLink}}" target="_blank">
                            {{ic.user.username}}
                        </a>
                        <span class="fa-stack verified-stack" ng-show="ic.user.isVerified">
                            <i class="fa fa-certificate fa-stack-2x" aria-hidden="true"></i>
                            <i class="fa fa-check fa-stack-1x" aria-hidden="true"></i>
                        </span>
                    </h1>
                    <h2>
                        <i class="fa fa-user-circle" aria-hidden="true"></i>
                        {{ic.user.fullName}}
                    </h2>
                    <h2>
                        <i class="fa fa-file-image-o" aria-hidden="true"></i>
                        <b>{{ic.user.count}}</b> posts
                    </h2>

                    <div class="btn-group" role="group" aria-label="Choose next action">
                        <button type="button" class="btn btn-secondary go-btn" title="Search another user"
                                ng-click="ic.showSearch()">
                            <i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Search
                        </button>
                        <button type="button" class="btn btn-secondary go-btn" ng-click="ic.next()"
                                ng-show="!ic.user.isPrivate" ng-disabled="ic.user.count === 0"
                                title="{{ic.user.count === 0 ? 'No data to download'
                                                     : 'Download ' + ic.user.username + ' data'}}">
                            Next <i class="fa fa-arrow-right" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>

        </div>

        <div ng-if="ac.view === 'settings'" ng-controller="SettingsController as sc">
            <div class="settings-contents">
                <img class="col-md-4 img-circle" ng-src="{{sc.userPicUrl}}">
                <div class="col-md-7 settings-block">
                    <h2>Settings</h2>
                    <label class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" ng-model="sc.settings.includeImages">
                        <span class="custom-control-indicator"></span>
                        <span class="custom-control-description">include images</span>
                    </label>
                    <label class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" ng-model="sc.settings.includeVideos">
                        <span class="custom-control-indicator"></span>
                        <span class="custom-control-description">include videos</span>
                    </label>
                    <br>File names:<br>
                    <label class="custom-control custom-radio">
                        <input id="radio1" name="radio" type="radio" class="custom-control-input"
                               ng-model="sc.settings.fileNamePattern" value="index">
                        <span class="custom-control-indicator"></span>
                        <span class="custom-control-description">1,2,3...</span>
                    </label>
                    <label class="custom-control custom-radio">
                        <input id="radio2" name="radio" type="radio" class="custom-control-input"
                               ng-model="sc.settings.fileNamePattern" value="id">
                        <span class="custom-control-indicator"></span>
                        <span class="custom-control-description">id</span>
                    </label>
                    <button type="button" class="btn btn-secondary go-btn" ng-click="sc.pack()"
                            ng-show="!ic.user.isPrivate"
                            ng-disabled="!sc.settings.includeImages && !sc.settings.includeVideos">
                        Go <i class="fa fa-arrow-right" aria-hidden="true"></i>
                    </button>
                </div>
            </div>

        </div>

        <div ng-if="ac.view === 'pack'" ng-controller="PackController as pc">
            <div class="col-md-10 offset-md-1 collect-status-block text-center ">
                <h3 ng-show="!ac.pack.packStatus">Collecting <b>{{pc.user.username}}</b> data</h3>
                <h4 ng-show="!ac.pack.packStatus">it may take some time</h4>
                <a class="btn btn-success btn-lg" ng-show="ac.pack.packStatus"
                   href="{{'/packs/' + ac.pack.packName + '.zip'}}" type="application/zip" target="_blank" download>
                    <i class="fa fa-download" aria-hidden="true"></i> Download {{pc.user.username}}.zip
                </a>
            </div>

        </div>

    </div>
</div>

</body>
</html>